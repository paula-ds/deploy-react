(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{111:function(e,t){},209:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(71),s=a.n(o),c=(a(80),a(20)),i=a(21),r=a(5),u=a(23),h=a(22),m=(a(81),a(82),a(72)),d=a.n(m),v=a(73),b=(a(207),{responsive:!0,scales:{xAxes:[{type:"time",distribution:"linear",ticks:{source:"auto"},time:{displayFormats:{second:"h:mm:ss a"},unit:"second"},scaleLabel:{display:!0,labelString:"Time"}}],yAxes:[{ticks:{beginAtZero:!0,stepValue:10,steps:10},scaleLabel:{display:!0,labelString:"Price ($)"}}]},pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,drag:!1,mode:"x"}}),k=["rgb(244, 67, 54)","rgb(76, 175, 80)","rgb(63, 81, 181)","rgb(255, 152, 0)","rgb(33, 150, 243)","rgb(139, 195, 74)","rgb(255, 87, 34)","rgb(121, 85, 72)","rgb(233, 30, 99)","rgb(205, 220, 57)","rgb(156, 39, 176)","rgb(255, 235, 59)","rgb(158, 158, 158)","rgb(103, 58, 183)","rgb(0, 150, 136)","rgb(255, 193, 7)","rgb(96, 125, 139)","rgb(33, 33, 33)","rgb(169, 4, 4)","rgb(1, 74, 64)","rgb(179, 3, 72)","rgb(84, 58, 68)"],p=function(e,t,a){return{label:e.toUpperCase(),fill:!1,lineTension:0,backgroundColor:t,borderColor:t,borderCapStyle:"butt",borderJoinStyle:"miter",pointBorderColor:t,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:t,pointHoverBorderColor:t,pointHoverBorderWidth:2,pointRadius:3,pointHitRadius:10,data:a}},E=(l.a.Component,function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).seleccionar=function(e){console.log("hago click")},n.state={estado:!1,estado_ex:!1,stock:{},exchange:{},update:{},data:{},buy:{},sell:{},grafico:{},stock_all:{},diccionario:{},conexion:"Conectado",diccionario_acc:{},volumen_tot:{}},n.onStock=n._onStock.bind(Object(r.a)(n)),n.onExchange=n._onExchange.bind(Object(r.a)(n)),n.onBuy=n._onBuy.bind(Object(r.a)(n)),n.onSell=n._onSell.bind(Object(r.a)(n)),n.onUpdate=n._onUpdate.bind(Object(r.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.socket=d()("wss://\u200ble-18262636.bitzonte.com",{path:"/stocks",transports:["websocket"],forceNew:!0}),this.socket.on("connect",(function(){console.log("connected from the client side")}));this.setState({volumen_tot:{volumen:0}}),this.setState({conexion:"Conectado"}),this.socket.on("STOCKS",this.onStock),this.socket.on("EXCHANGES",this.onExchange),this.socket.on("BUY",this.onBuy),this.socket.on("SELL",this.onSell),this.socket.on("UPDATE",this.onUpdate),this.requestStock(),this.requestExchange()}},{key:"handleClick",value:function(){console.log("Cliente desconectado"),this.setState({conexion:"Desconectado"}),this.socket.disconnect()}},{key:"reconectar",value:function(){console.log("Reconectando"),this.componentDidMount()}},{key:"requestStock",value:function(){console.log("entra al request stock"),this.socket.emit("STOCKS")}},{key:"requestExchange",value:function(){console.log("entra al request exchange"),this.socket.emit("EXCHANGES")}},{key:"requestUpdate",value:function(){this.socket.emit("UPDATE")}},{key:"requestBuy",value:function(){this.socket.emit("BUY")}},{key:"requestSell",value:function(){this.socket.emit("SELL")}},{key:"_onStock",value:function(e){console.log("entra al on stock");for(var t={},a={},n={},l=e.length,o=0;o<l;o++){var s=e[o].ticker;t[s]={company_name:e[o].company_name,quote_base:e[o].quote_base,country:e[o].country,click:0};var c=e[o].company_name;a[c]=s,n[s]=c}this.setState({stock_all:t}),this.setState({estado:!0}),this.setState({diccionario:a}),this.setState({diccionario_acc:n})}},{key:"_onExchange",value:function(e){for(var t={},a={},n=Object.keys(e).length,l=0,o=0,s=0,c=0,i=0,r=0;r<n;r++){o=0,c=0,t={},i=0;var u=Object.keys(e)[r],h=e[u].listed_companies;l=h.length;for(var m=0,d=0,v=0;v<l;v++){var b=h[v],k=this.state.diccionario[b];(m=this.state.sell[k])||(m=0),(d=this.state.buy[k])||(d=0),o+=m,o+=d,i+=d,c+=m,t[b]={sell:m,buy:d}}s+=o,a[u]=e[u],a[u].listed_companies=t,a[u].volumen_transado=o,a[u].cantidad_acciones=l,a[u].suma_sell=c,a[u].suma_buy=i;var p=this.state.volumen_tot.volumen;a[u].participacion=(100*o/p).toFixed(2)}var E={};E.volumen=s,this.setState({exchange:a}),this.setState({volumen_tot:E}),this.setState({estado_ex:!0})}},{key:"actualizar_buy",value:function(e,t){var a=this.state.exchange,n=this.state.diccionario_acc[e],l=this.state.volumen_tot;for(var o in a)for(var s in a[o].cantidad_acciones=Object.keys(a[o].listed_companies).length,a[o].listed_companies)s===n&&(a[o].volumen_transado+=t,l.volumen+=t,a[o].listed_companies[n].buy+=t,a[o].suma_buy+=t);for(var o in this.setState({volumen_tot:l}),a)a[o].participacion=(100*a[o].volumen_transado/this.state.volumen_tot.volumen).toFixed(2);this.setState({exchange:a})}},{key:"actualizar_sell",value:function(e,t){var a=this.state.exchange,n=this.state.diccionario_acc[e],l=this.state.volumen_tot;for(var o in a)for(var s in a[o].cantidad_acciones=Object.keys(a[o].listed_companies).length,a[o].listed_companies)s===n&&(a[o].volumen_transado+=t,l.volumen+=t,a[o].listed_companies[n].sell+=t,a[o].suma_sell+=t);for(var o in this.setState({volumen_tot:l}),a)a[o].participacion=(100*a[o].volumen_transado/this.state.volumen_tot.volumen).toFixed(2);this.setState({exchange:a})}},{key:"_onUpdate",value:function(e){var t=e.ticker,a=this.state.update,n=[].push(e);this.setState({grafico:n});for(var l=Object.keys(this.state.update).length,o=0,s={},c=0;c<l;c++)Object.keys(this.state.update)[c]===t&&(o=1,(s={valor_alto:this.state.update[t].valor_alto,valor_bajo:this.state.update[t].valor_bajo,ultimo:this.state.update[t].ultimo}).var=((e.value-this.state.update[t].ultimo)/this.state.update[t].ultimo*100).toFixed(2),this.state.update[t].valor_alto<e.value&&(s.valor_alto=e.value),this.state.update[t].valor_bajo>e.value&&(s.valor_bajo=e.value),s.ultimo=e.value,s.time=e.time,a[t]=s);0===o&&(s={valor_alto:e.value,valor_bajo:e.value,ultimo:e.value,time:e.time,var:0},a[t]=s,this.setState({update:a}))}},{key:"_onBuy",value:function(e){for(var t=e.ticker,a=this.state.stock,n=this.state.buy,l=this.state.sell,o=Object.keys(this.state.stock).length,s=0,c=0;c<o;c++){Object.keys(this.state.stock)[c]===t&&(s=1,a[t]+=e.volume,this.setState({stock:a}),n[t]+=e.volume,this.setState({buy:n}),this.actualizar_buy(t,e.volume))}0===s&&(a[t]=e.volume,this.setState({stock:a}),n[t]=e.volume,this.setState({buy:n}),this.actualizar_buy(t,e.volume),l[t]=0,this.setState({sell:l}))}},{key:"_onSell",value:function(e){for(var t=e.ticker,a=this.state.stock,n=this.state.buy,l=this.state.sell,o=Object.keys(this.state.stock).length,s=0,c=0;c<o;c++)Object.keys(this.state.stock)[c]===t&&(s=1,a[t]+=e.volume,this.setState({stock:a}),l[t]+=e.volume,this.setState({sell:l}),this.actualizar_sell(t,e.volume));0===s&&(a[t]=e.volume,this.setState({stock:a}),l[t]=e.volume,this.setState({sell:l}),this.actualizar_sell(t,e.volume),n[t]=0,this.setState({buy:n}))}},{key:"render",value:function(){var e=[],t=[];if(!0===this.state.estado_ex)for(var a in this.state.exchange)t.push(l.a.createElement("tr",null,l.a.createElement("td",null,this.state.exchange[a].exchange_ticker," "),l.a.createElement("td",null,this.state.exchange[a].name," "),l.a.createElement("td",null,this.state.exchange[a].country," "),l.a.createElement("td",null,this.state.exchange[a].address," "),l.a.createElement("td",null,Object.keys(this.state.exchange[a].listed_companies).join(", ")),l.a.createElement("td",null,this.state.exchange[a].suma_buy),l.a.createElement("td",null,this.state.exchange[a].suma_sell),l.a.createElement("td",null,this.state.exchange[a].volumen_transado),l.a.createElement("td",null,this.state.exchange[a].cantidad_acciones),l.a.createElement("td",null,this.state.exchange[a].participacion)));if(!0===this.state.estado)for(var a in this.state.stock)this.state.update[a]?e.push(l.a.createElement("tr",{onClick:this.seleccionar.bind(this,a)},l.a.createElement("td",null," ",a," "),l.a.createElement("td",null," ",this.state.stock_all[a].company_name),l.a.createElement("td",null," ",this.state.stock_all[a].country),l.a.createElement("td",null," ",this.state.stock_all[a].quote_base),l.a.createElement("td",null," ",this.state.stock[a]),l.a.createElement("td",null," ",this.state.update[a].valor_alto),l.a.createElement("td",null," ",this.state.update[a].valor_bajo),l.a.createElement("td",null," ",this.state.update[a].ultimo),l.a.createElement("td",null," ",this.state.update[a].var))):e.push(l.a.createElement("tr",{onClick:this.seleccionar.bind(this,a)},l.a.createElement("td",null," ",a," "),l.a.createElement("td",null," ",this.state.stock_all[a].company_name),l.a.createElement("td",null," ",this.state.stock_all[a].country),l.a.createElement("td",null," ",this.state.stock_all[a].quote_base),l.a.createElement("td",null," ",this.state.stock[a]),l.a.createElement("td",null," - "),l.a.createElement("td",null," - "),l.a.createElement("td",null," - "),l.a.createElement("td",null," - ")));return l.a.createElement("div",null,l.a.createElement("h4",null,"Tu estado es: ",this.state.conexion),l.a.createElement("button",{onClick:this.handleClick.bind(this)},"Desconectar"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.componentDidMount.bind(this)},"Volver a conectar"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h2",{align:"center"}," STOCKS "),l.a.createElement("table",{className:"GeneratedTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ticker"),l.a.createElement("th",null,"Nombre empresa"),l.a.createElement("th",null,"Pa\xeds"),l.a.createElement("th",null,"Quote Base"),l.a.createElement("th",null,"Volumen total transado"),l.a.createElement("th",null,"Alto hist\xf3rico"),l.a.createElement("th",null,"Bajo hist\xf3rico"),l.a.createElement("th",null,"\xdaltimo precio"),l.a.createElement("th",null,"Variaci\xf3n porcentual"))),l.a.createElement("tbody",null,e)),"\xa0 \xa0 \xa0",l.a.createElement("h2",{align:"center"}," EXCHANGES "),l.a.createElement("table",{className:"GeneratedTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Exchange ticker"),l.a.createElement("th",null,"Nombre"),l.a.createElement("th",null,"Pa\xeds"),l.a.createElement("th",null,"Direcci\xf3n"),l.a.createElement("th",null,"Compa\xf1\xedas listadas"),l.a.createElement("th",null,"Volumen Compra"),l.a.createElement("th",null,"Volumen Venta"),l.a.createElement("th",null,"Volumen total"),l.a.createElement("th",null,"Cantidad Acciones"),l.a.createElement("th",null,"Participaci\xf3n de Mercado"))),l.a.createElement("tbody",null,t)),"\xa0 \xa0")}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){e.exports=a(209)},80:function(e,t,a){},81:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},82:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.7cedbba0.chunk.js.map