(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{34:function(t,e,a){t.exports=a(73)},39:function(t,e,a){},40:function(t,e,a){},70:function(t,e){},73:function(t,e,a){"use strict";a.r(e);var n=a(0),l=a.n(n),s=a(28),o=a.n(s),c=(a(39),a(29)),i=a(30),u=a(2),r=a(33),h=a(32),m=(a(40),a(31)),d=a.n(m),v=function(t){Object(r.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).seleccionar=function(t){console.log("hago click")},n.state={estado:!1,estado_ex:!1,stock:{},exchange:{},update:{},data:{},buy:{},sell:{},grafico:{},stock_all:{},diccionario:{},conexion:"Conectado",diccionario_acc:{},volumen_tot:{}},n.onStock=n._onStock.bind(Object(u.a)(n)),n.onExchange=n._onExchange.bind(Object(u.a)(n)),n.onBuy=n._onBuy.bind(Object(u.a)(n)),n.onSell=n._onSell.bind(Object(u.a)(n)),n.onUpdate=n._onUpdate.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.socket=d()("wss://\u200ble-18262636.bitzonte.com",{path:"/stocks",transports:["websocket"],forceNew:!0}),this.socket.on("connect",(function(){console.log("connected from the client side")}));this.setState({volumen_tot:{volumen:0}}),this.setState({conexion:"Conectado"}),this.socket.on("STOCKS",this.onStock),this.socket.on("EXCHANGES",this.onExchange),this.socket.on("BUY",this.onBuy),this.socket.on("SELL",this.onSell),this.socket.on("UPDATE",this.onUpdate),this.requestStock(),this.requestExchange()}},{key:"handleClick",value:function(){console.log("Cliente desconectado"),this.setState({conexion:"Desconectado"}),this.socket.disconnect()}},{key:"reconectar",value:function(){console.log("Reconectando"),this.componentDidMount()}},{key:"requestStock",value:function(){console.log("entra al request stock"),this.socket.emit("STOCKS")}},{key:"requestExchange",value:function(){console.log("entra al request exchange"),this.socket.emit("EXCHANGES")}},{key:"requestUpdate",value:function(){this.socket.emit("UPDATE")}},{key:"requestBuy",value:function(){this.socket.emit("BUY")}},{key:"requestSell",value:function(){this.socket.emit("SELL")}},{key:"_onStock",value:function(t){console.log("entra al on stock");for(var e={},a={},n={},l=t.length,s=0;s<l;s++){var o=t[s].ticker;e[o]={company_name:t[s].company_name,quote_base:t[s].quote_base,country:t[s].country,click:0};var c=t[s].company_name;a[c]=o,n[o]=c}this.setState({stock_all:e}),this.setState({estado:!0}),this.setState({diccionario:a}),this.setState({diccionario_acc:n})}},{key:"_onExchange",value:function(t){for(var e={},a={},n=Object.keys(t).length,l=0,s=0,o=0,c=0,i=0,u=0;u<n;u++){s=0,c=0,e={},i=0;var r=Object.keys(t)[u],h=t[r].listed_companies;l=h.length;for(var m=0,d=0,v=0;v<l;v++){var k=h[v],E=this.state.diccionario[k];(m=this.state.sell[E])||(m=0),(d=this.state.buy[E])||(d=0),s+=m,s+=d,i+=d,c+=m,e[k]={sell:m,buy:d}}o+=s,a[r]=t[r],a[r].listed_companies=e,a[r].volumen_transado=s,a[r].cantidad_acciones=l,a[r].suma_sell=c,a[r].suma_buy=i;var _=this.state.volumen_tot.volumen;a[r].participacion=(100*s/_).toFixed(2)}var b={};b.volumen=o,this.setState({exchange:a}),this.setState({volumen_tot:b}),this.setState({estado_ex:!0})}},{key:"actualizar_buy",value:function(t,e){var a=this.state.exchange,n=this.state.diccionario_acc[t],l=this.state.volumen_tot;for(var s in a)for(var o in a[s].cantidad_acciones=Object.keys(a[s].listed_companies).length,a[s].listed_companies)o===n&&(a[s].volumen_transado+=e,l.volumen+=e,a[s].listed_companies[n].buy+=e,a[s].suma_buy+=e);for(var c in this.setState({volumen_tot:l}),a)a[c].participacion=(100*a[c].volumen_transado/this.state.volumen_tot.volumen).toFixed(2);this.setState({exchange:a})}},{key:"actualizar_sell",value:function(t,e){var a=this.state.exchange,n=this.state.diccionario_acc[t],l=this.state.volumen_tot;for(var s in a)for(var o in a[s].cantidad_acciones=Object.keys(a[s].listed_companies).length,a[s].listed_companies)o===n&&(a[s].volumen_transado+=e,l.volumen+=e,a[s].listed_companies[n].sell+=e,a[s].suma_sell+=e);for(var c in this.setState({volumen_tot:l}),a)a[c].participacion=(100*a[c].volumen_transado/this.state.volumen_tot.volumen).toFixed(2);this.setState({exchange:a})}},{key:"_onUpdate",value:function(t){var e=t.ticker,a=this.state.update,n=[].push(t);this.setState({grafico:n});for(var l=Object.keys(this.state.update).length,s=0,o={},c=0;c<l;c++)Object.keys(this.state.update)[c]===e&&(s=1,(o={valor_alto:this.state.update[e].valor_alto,valor_bajo:this.state.update[e].valor_bajo,ultimo:this.state.update[e].ultimo}).var=((t.value-this.state.update[e].ultimo)/this.state.update[e].ultimo*100).toFixed(2),this.state.update[e].valor_alto<t.value&&(o.valor_alto=t.value),this.state.update[e].valor_bajo>t.value&&(o.valor_bajo=t.value),o.ultimo=t.value,o.time=t.time,a[e]=o);0===s&&(o={valor_alto:t.value,valor_bajo:t.value,ultimo:t.value,time:t.time,var:0},a[e]=o,this.setState({update:a}))}},{key:"_onBuy",value:function(t){for(var e=t.ticker,a=this.state.stock,n=this.state.buy,l=this.state.sell,s=Object.keys(this.state.stock).length,o=0,c=0;c<s;c++){Object.keys(this.state.stock)[c]===e&&(o=1,a[e]+=t.volume,this.setState({stock:a}),n[e]+=t.volume,this.setState({buy:n}),this.actualizar_buy(e,t.volume))}0===o&&(a[e]=t.volume,this.setState({stock:a}),n[e]=t.volume,this.setState({buy:n}),this.actualizar_buy(e,t.volume),l[e]=0,this.setState({sell:l}))}},{key:"_onSell",value:function(t){for(var e=t.ticker,a=this.state.stock,n=this.state.buy,l=this.state.sell,s=Object.keys(this.state.stock).length,o=0,c=0;c<s;c++)Object.keys(this.state.stock)[c]===e&&(o=1,a[e]+=t.volume,this.setState({stock:a}),l[e]+=t.volume,this.setState({sell:l}),this.actualizar_sell(e,t.volume));0===o&&(a[e]=t.volume,this.setState({stock:a}),l[e]=t.volume,this.setState({sell:l}),this.actualizar_sell(e,t.volume),n[e]=0,this.setState({buy:n}))}},{key:"render",value:function(){var t=[],e=[];if(!0===this.state.estado_ex)for(var a in this.state.exchange)e.push(l.a.createElement("tr",null,l.a.createElement("td",null,this.state.exchange[a].exchange_ticker," "),l.a.createElement("td",null,this.state.exchange[a].name," "),l.a.createElement("td",null,this.state.exchange[a].country," "),l.a.createElement("td",null,this.state.exchange[a].address," "),l.a.createElement("td",null,Object.keys(this.state.exchange[a].listed_companies).join(", ")),l.a.createElement("td",null,this.state.exchange[a].suma_buy),l.a.createElement("td",null,this.state.exchange[a].suma_sell),l.a.createElement("td",null,this.state.exchange[a].volumen_transado),l.a.createElement("td",null,this.state.exchange[a].cantidad_acciones),l.a.createElement("td",null,this.state.exchange[a].participacion)));if(!0===this.state.estado)for(var n in this.state.stock)this.state.update[n]?t.push(l.a.createElement("tr",{onClick:this.seleccionar.bind(this,n)},l.a.createElement("td",null," ",n," "),l.a.createElement("td",null," ",this.state.stock_all[n].company_name),l.a.createElement("td",null," ",this.state.stock_all[n].country),l.a.createElement("td",null," ",this.state.stock_all[n].quote_base),l.a.createElement("td",null," ",this.state.stock[n]),l.a.createElement("td",null," ",this.state.update[n].valor_alto),l.a.createElement("td",null," ",this.state.update[n].valor_bajo),l.a.createElement("td",null," ",this.state.update[n].ultimo),l.a.createElement("td",null," ",this.state.update[n].var))):t.push(l.a.createElement("tr",{onClick:this.seleccionar.bind(this,n)},l.a.createElement("td",null," ",n," "),l.a.createElement("td",null," ",this.state.stock_all[n].company_name),l.a.createElement("td",null," ",this.state.stock_all[n].country),l.a.createElement("td",null," ",this.state.stock_all[n].quote_base),l.a.createElement("td",null," ",this.state.stock[n]),l.a.createElement("td",null," - "),l.a.createElement("td",null," - "),l.a.createElement("td",null," - "),l.a.createElement("td",null," - ")));return l.a.createElement("div",null,l.a.createElement("h4",null,"Tu estado es: ",this.state.conexion),l.a.createElement("button",{onClick:this.handleClick.bind(this)},"Desconectar"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.componentDidMount.bind(this)},"Volver a conectar"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h2",{align:"center"}," STOCKS "),l.a.createElement("table",{className:"GeneratedTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ticker"),l.a.createElement("th",null,"Nombre empresa"),l.a.createElement("th",null,"Pa\xeds"),l.a.createElement("th",null,"Quote Base"),l.a.createElement("th",null,"Volumen total transado"),l.a.createElement("th",null,"Alto hist\xf3rico"),l.a.createElement("th",null,"Bajo hist\xf3rico"),l.a.createElement("th",null,"\xdaltimo precio"),l.a.createElement("th",null,"Variaci\xf3n porcentual"))),l.a.createElement("tbody",null,t)),"\xa0 \xa0 \xa0",l.a.createElement("h2",{align:"center"}," EXCHANGES "),l.a.createElement("table",{className:"GeneratedTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Exchange ticker"),l.a.createElement("th",null,"Nombre"),l.a.createElement("th",null,"Pa\xeds"),l.a.createElement("th",null,"Direcci\xf3n"),l.a.createElement("th",null,"Compa\xf1\xedas listadas"),l.a.createElement("th",null,"Volumen Compra"),l.a.createElement("th",null,"Volumen Venta"),l.a.createElement("th",null,"Volumen total"),l.a.createElement("th",null,"Cantidad Acciones"),l.a.createElement("th",null,"Participaci\xf3n de Mercado"))),l.a.createElement("tbody",null,e)),"\xa0 \xa0")}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.8185675e.chunk.js.map